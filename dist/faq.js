!function(){const e="[data-faq-list]",t="[data-faq-tags]",n="[data-faq-search]",a="[data-faq-schema]",o="/data/faq.json",r={entries:[],index:null,query:"",tag:"all"};function i(e,t){const n=document.createElement("button");return n.type="button",n.className="tag-pill",n.textContent=t,n.dataset.tag=e,e===r.tag?(n.classList.add("is-active"),n.setAttribute("aria-pressed","true")):n.setAttribute("aria-pressed","false"),n}function c(t){const n=document.querySelector(e);if(!n)return;const a=function(e){let t=e;"all"!==r.tag&&(t=t.filter(e=>Array.isArray(e.tags)&&e.tags.includes(r.tag)));if(r.query&&r.index){const n=r.index.search(r.query,{expand:!0}).map(e=>e.ref),a=new Map(e.map(e=>[e.id,e])),o=n.map(e=>a.get(e)).filter(Boolean).filter(e=>t.includes(e)),i=Array.from(new Set(o)),c=r.query.toLowerCase(),s=t.filter(e=>!i.includes(e)&&e.question.toLowerCase().includes(c));t=i.concat(s)}return t}(t);n.innerHTML="",a.length?(a.forEach(e=>{const t=document.createElement("article");t.className="accordion anchor-offset",t.id=e.id;const a=document.createElement("div"),o=document.createElement("button");o.type="button",o.className="accordion__summary",o.setAttribute("aria-expanded","false");const r=`${e.id}-panel`;o.setAttribute("aria-controls",r),o.id=`${e.id}-toggle`,o.dataset.accordionToggle="true";const i=document.createElement("span");i.textContent=e.question;const c=document.createElement("span");c.className="accordion__icon",c.setAttribute("aria-hidden","true"),c.textContent="âŒ„",o.appendChild(i),o.appendChild(c),a.appendChild(o),t.appendChild(a);const s=document.createElement("div");s.className="accordion__content",s.id=r,s.setAttribute("role","region"),s.setAttribute("aria-labelledby",o.id),s.hidden=!0;const d=document.createElement("div");d.className="accordion__body",d.innerHTML=e.answer;const l=document.createElement("p");l.className="accordion__permalink";const u=document.createElement("a");if(u.href=`#${e.id}`,u.textContent="Permalink",l.appendChild(u),s.appendChild(d),s.appendChild(l),Array.isArray(e.sources)&&e.sources.length){const t=document.createElement("div");t.className="source-box accordion__sources";const n=document.createElement("p");n.className="source-box__title",n.textContent="From the source",t.appendChild(n);const a=document.createElement("ul");a.className="source-box__links",e.sources.forEach(e=>{if(!e||!e.url)return;const t=document.createElement("li"),n=document.createElement("a");n.className="source-box__link",n.href=e.url,n.target="_blank",n.rel="noopener",n.textContent=e.label||e.url,t.appendChild(n),a.appendChild(t)}),t.appendChild(a),s.appendChild(t)}t.appendChild(s),n.appendChild(t)}),window.TelcoinWiki&&"function"==typeof window.TelcoinWiki.applyStatusText&&window.TelcoinWiki.applyStatusText(n),d()):s(n)}function s(e){e.innerHTML="";const t=document.createElement("div");t.className="empty-state",t.setAttribute("role","status"),t.textContent="No answers yet. Check back soon or explore the Telcoin Association resources.",e.appendChild(t)}function d(){const e=(location.hash||"").replace("#","");if(!e)return;const t=document.getElementById(`${e}-toggle`),n=document.getElementById(`${e}-panel`);if(!t||!n)return;t.setAttribute("aria-expanded","true"),n.hidden=!1;const a=t.closest(".accordion");a&&a.classList.add("is-open");const o=window.matchMedia("(prefers-reduced-motion: reduce)").matches;n.scrollIntoView({behavior:o?"auto":"smooth",block:"start"})}function l(e){if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}document.addEventListener("DOMContentLoaded",function(){const u=document.querySelector(e);if(!u||"undefined"==typeof elasticlunr)return;(function(){if(window.TelcoinWikiData&&Array.isArray(window.TelcoinWikiData.faq))return Promise.resolve(window.TelcoinWikiData.faq);return fetch(o,{credentials:"omit",cache:"no-store"}).then(e=>{if(!e.ok)throw new Error("Failed to load FAQ");return e.json()}).catch(()=>[])})().then(o=>{o.length?(r.entries=o,function(e){const t=elasticlunr(function(){this.setRef("id"),this.addField("question"),this.addField("answer"),this.addField("tags")});e.forEach(e=>{t.addDoc({id:e.id,question:e.question,answer:l(e.answer||""),tags:(e.tags||[]).join(" ")})}),r.index=t}(o),function(e){const n=document.querySelector(t);if(!n)return;const a=new Set;e.forEach(e=>{(e.tags||[]).forEach(e=>a.add(e))});const o=Array.from(a).sort((e,t)=>e.localeCompare(t));n.innerHTML="";const r=i("all","All");r.classList.add("is-active"),n.appendChild(r),o.forEach(e=>{const t=i(e,e);n.appendChild(t)})}(o),c(o),function(){const e=document.querySelector(n);if(!e)return;e.addEventListener("input",e=>{r.query=(e.target.value||"").trim(),c(r.entries)})}(),function(){const e=document.querySelector(t);if(!e)return;e.addEventListener("click",t=>{const n=t.target.closest("[data-tag]");if(!n)return;t.preventDefault();const a=n.dataset.tag||"all";r.tag!==a&&(r.tag=a,Array.from(e.querySelectorAll("[data-tag]")).forEach(e=>{e.dataset.tag===a?(e.classList.add("is-active"),e.setAttribute("aria-pressed","true")):(e.classList.remove("is-active"),e.setAttribute("aria-pressed","false"))}),c(r.entries))})}(),function(){const t=document.querySelector(e);if(!t)return;t.addEventListener("click",e=>{const t=e.target.closest("[data-accordion-toggle]");if(!t)return;const n=t.getAttribute("aria-controls");if(!n)return;const a=document.getElementById(n),o="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",o?"false":"true"),a&&(a.hidden=o);const r=t.closest(".accordion");r&&r.classList.toggle("is-open",!o)})}(),d(),function(e){const t=document.querySelector(a)||document.body;if(!t)return;const n={"@context":"https://schema.org","@type":"FAQPage",mainEntity:e.map(e=>({"@type":"Question",name:e.question,url:`https://telcoinwiki.com/faq/#${e.id}`,acceptedAnswer:{"@type":"Answer",text:l(e.answer||"")}}))},o=document.createElement("script");o.type="application/ld+json",o.textContent=JSON.stringify(n,null,2),t.appendChild(o)}(o),window.addEventListener("hashchange",d)):s(u)}).catch(()=>{s(u)})})}();